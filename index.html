<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í…ìŠ¤íŠ¸ ì´ë¯¸ì§€ ë³€í™˜ê¸°</title>
  <style>
    /* ìƒ‰ìƒ ë³€ìˆ˜ (ê¸°ë³¸: ë¼ì´íŠ¸) */
    :root{
      --bg: #ffffff;
      --fg: #111111;
      --panel-bg: #ffffff;
      --muted: #666666;
      --btn-bg: #f0f0f0;
      --btn-bg-hover: #e0e0e0;
      --btn-border: #cccccc;
      --canvas-bg: #ffffff;
      --canvas-border: #999999;
    }
    /* OS ë‹¤í¬ ëª¨ë“œ ê¸°ë³¸ ë°˜ì˜ (ì‚¬ìš©ì ì§€ì • ì—†ì„ ë•Œ) */
    @media (prefers-color-scheme: dark){
      :root{
        --bg: #121212;
        --fg: #eaeaea;
        --panel-bg: #1b1b1b;
        --muted: #aaaaaa;
        --btn-bg: #2a2a2a;
        --btn-bg-hover: #333333;
        --btn-border: #3d3d3d;
        --canvas-bg: #111111;
        --canvas-border: #444444;
      }
    }
    /* ì‚¬ìš©ì í† ê¸€ ìš°ì„  ì ìš© */
    body[data-theme="light"]{
      --bg: #ffffff;
      --fg: #111111;
      --panel-bg: #ffffff;
      --muted: #666666;
      --btn-bg: #f0f0f0;
      --btn-bg-hover: #e0e0e0;
      --btn-border: #cccccc;
      --canvas-bg: #ffffff;
      --canvas-border: #999999;
    }
    body[data-theme="dark"]{
      --bg: #121212;
      --fg: #eaeaea;
      --panel-bg: #1b1b1b;
      --muted: #aaaaaa;
      --btn-bg: #2a2a2a;
      --btn-bg-hover: #333333;
      --btn-border: #3d3d3d;
      --canvas-bg: #111111;
      --canvas-border: #444444;
    }

    body {
      font-family: system-ui, -apple-system, Segoe UI, sans-serif;
      padding:16px;
      text-align: center;
      background: var(--bg);
      color: var(--fg);
    }
    .controls { margin-bottom:10px; }
    textarea {
      width:420px; height:120px; resize:vertical;
      background: var(--panel-bg); color: var(--fg);
      border: 1px solid var(--btn-border);
    }
    label { font-size:13px; margin-right:8px; color: var(--fg); }
    select {
      padding: 4px 8px; margin: 6px; font-size: 13px;
      background: var(--panel-bg); color: var(--fg);
      border: 1px solid var(--btn-border);
    }
    input[type="text"], input[type="color"] {
      background: var(--panel-bg); color: var(--fg);
      border: 1px solid var(--btn-border);
    }
    button {
      background: var(--btn-bg);
      border: 1px solid var(--btn-border);
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 13px;
      color: var(--fg);
    }
    button:hover { background: var(--btn-bg-hover); }
    #canvas {
      display:block; margin:12px auto; image-rendering: pixelated;
      background: var(--canvas-bg);
      border: 1px solid var(--canvas-border);
    }
    .theme-switcher {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 1000;
      display: flex;
      gap: 6px;
    }
    .theme-switcher button { border-radius: 4px; }
    small { color: var(--muted); }
    a#downloadLink { color: var(--fg); }
  </style>
</head>
<body>
  <div class="theme-switcher">
    <button onclick="location.href='./xp_theme/'">ğŸªŸ XP í…Œë§ˆë¡œ</button>
    <button onclick="location.href='./98_theme/'">ğŸ–¥ï¸ 98 í…Œë§ˆë¡œ</button>
    <button id="toggleThemeBtn" title="ë¼ì´íŠ¸/ë‹¤í¬ ì „í™˜"></button>
  </div>

  <div class="controls">
    <div style="margin-bottom:8px;">
      <label>í°íŠ¸ ì„ íƒ:</label>
      <select id="fontSelect">
        <option value="english_old">English Old (18px)</option>
        <option value="smallest_font">Smallest Font (5px)</option>
      </select>
    </div>
    
    <textarea id="textInput" placeholder="ì—¬ëŸ¬ ì¤„ ì…ë ¥ ê°€ëŠ¥"></textarea>
    <button id="generateBtn">ìƒì„±</button>
    <small style="display:block;margin-top:4px;">Ctrl+Enterë¡œ ìƒì„± Â· EnterëŠ” ì¤„ë°”ê¿ˆ</small>
    
    <div style="margin-top:8px; display:inline-block; text-align:left;">
      <label>ê¸€ìê°„ê²©: <strong id="letterSpacingVal">1</strong>px</label>
      <input id="letterSpacing" type="range" min="0" max="10" value="1">
      <br>
      <label>ê³µë°± ë„ˆë¹„: <strong id="spaceWidthVal">4</strong>px</label>
      <input id="spaceWidth" type="range" min="0" max="50" value="4">
      <br>
      <label>ì¤„ ê°„ê²©: <strong id="lineSpacingVal">1</strong>px</label>
      <input id="lineSpacing" type="range" min="0" max="40" value="1">
      <br>
      <label>í™”ë©´ ë°°ìœ¨: <strong id="displayScaleVal">2</strong>x</label>
      <input id="displayScale" type="range" min="1" max="6" value="2" step="1">
      <br>
      <label>ìƒ‰ìƒ:</label>
      <input id="colorPicker" type="color" value="#000000">
      <input id="colorHex" type="text" placeholder="#RRGGBB" value="#000000" style="width:90px;margin-left:6px;">
    </div>
  </div>

  <canvas id="canvas" width="800" height="200"></canvas>
  <a id="downloadLink" style="display:none;">ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ</a>

  <!-- ë‹¤í¬ëª¨ë“œ í† ê¸€ ìŠ¤í¬ë¦½íŠ¸ (OS ì„¤ì • ê°ì§€ + ì‚¬ìš©ì í† ê¸€ ì €ì¥) -->
  <script>
    (function(){
      const btn = document.getElementById('toggleThemeBtn');
      const media = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
      const saved = localStorage.getItem('theme');
      const prefersDark = media && media.matches;

      function setBtnLabel(theme){
        if (!btn) return;
        btn.textContent = theme === 'dark' ? 'â˜€ï¸ ë¼ì´íŠ¸ ëª¨ë“œ' : 'ğŸŒ™ ë‹¤í¬ ëª¨ë“œ';
        btn.setAttribute('aria-pressed', theme === 'dark' ? 'true' : 'false');
      }
      function applyTheme(theme, persist){
        document.body.dataset.theme = theme;
        setBtnLabel(theme);
        if (persist) localStorage.setItem('theme', theme);
      }

      const initial = saved || (prefersDark ? 'dark' : 'light');
      applyTheme(initial, false);

      if (media && media.addEventListener && !saved){
        media.addEventListener('change', e => {
          if (!localStorage.getItem('theme')) applyTheme(e.matches ? 'dark' : 'light', false);
        });
      }

      btn && btn.addEventListener('click', () => {
        const current = document.body.dataset.theme === 'dark' ? 'dark' : 'light';
        const next = current === 'dark' ? 'light' : 'dark';
        applyTheme(next, true);
      });
    })();
  </script>

  <script type="module" src="./script.js"></script>
</body>
</html>